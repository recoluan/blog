import{_ as o,c as l,b as s,d as e,e as t,a as r,o as p,r as i}from"./app-C99nLWlX.js";const d={},c={href:"http://keystonejs.com/zh/docs/configuration/#options-database",target:"_blank",rel:"noopener noreferrer"},u={href:"http://recoluan.gitlab.io",target:"_blank",rel:"noopener noreferrer"};function m(k,n){const a=i("ExternalLinkIcon");return p(),l("div",null,[n[5]||(n[5]=s("h2",{id:"问题",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#问题"},[s("span",null,"问题")])],-1)),n[6]||(n[6]=s("p",null,"mongoDB的默认登陆时无密码登陆的，为了安全起见，需要给mongoDB设置权限登录，但是keystoneJS默认是无密码登陆的，这是需要修改配置来解决问题",-1)),n[7]||(n[7]=s("h2",{id:"解决",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#解决"},[s("span",null,"解决")])],-1)),s("p",null,[n[1]||(n[1]=e("在keystone.js中找到配置初始化方法，添加一个")),s("a",c,[n[0]||(n[0]=e("mongo")),t(a)]),n[2]||(n[2]=e("对象来设置mongoDB连接实例，"))]),n[8]||(n[8]=r(`<div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">keystone<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;recoluan&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string-property property">&#39;brand&#39;</span><span class="token operator">:</span> <span class="token string">&#39;recoluan&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token string-property property">&#39;mongo&#39;</span><span class="token operator">:</span> <span class="token string">&#39;mongodb://user:password@host:port/dbName&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里需要注意的是，mongoDB在设置权限登录的时候，首先必须设置一个权限最大的主账户，它用来增删其他普通账户，记住，这个主账户时 <strong><em>无法</em></strong> 用来设置mongo对象的， 你需要用这个主账户创建一个数据库（下面称“dbName”），然后在这个dbName上再创建一个可读写dbName的普通账户，这个普通账户的user和password和dbName用来配置mongo对象</p>`,2)),s("p",null,[n[4]||(n[4]=e("个人博客：")),s("a",u,[n[3]||(n[3]=s("strong",null,"午后南杂",-1)),t(a)])])])}const b=o(d,[["render",m],["__file","110102.html.vue"]]),v=JSON.parse('{"path":"/blogs/backEnd/2017/110102.html","title":"mongoDB设置权限登陆后，在keystonejs中创建新的数据库连接实例","lang":"zh-CN","frontmatter":{"title":"mongoDB设置权限登陆后，在keystonejs中创建新的数据库连接实例","date":"2017-11-01T00:00:00.000Z","tags":["mongoDB","keystoneJS"],"categories":["backEnd"]},"headers":[{"level":2,"title":"问题","slug":"问题","link":"#问题","children":[]},{"level":2,"title":"解决","slug":"解决","link":"#解决","children":[]}],"git":{"createdTime":1536508429000,"updatedTime":1590769810000,"contributors":[{"name":"reco_luan","email":"recoluan@outlook.com","commits":1}]},"filePathRelative":"blogs/backEnd/2017/110102.md"}');export{b as comp,v as data};
